go сам маленьк разрабатыва arduino друг микроконтроллер хабр хабр β откр список стат автор поток разработк администрирован дизайн менеджмент маркетинг научпоп поиск профил обнов рейтинг otus цифров навык ведущ эксперт dmitriizolotov апр go сам маленьк разрабатыва arduino друг микроконтроллер врем прочтен мин количеств просмотр блог компан otus go программирован микроконтроллер интернет вещ язык go благодар сво простот возможн компиляц выполня образ встроен поддержк многозадачн стал некотор смысл серебрян пул создан высокопроизводительн инструмент совместн rust сформирова современ технологическ ландшафт devops действительн благодар поддержк набор инструмент llvm стал возможн использова go встраива сист например создан мобильн приложен например проект gomobile микроконтроллер стат поговор возможн проект tinygo преимуществ сравнен arduino друг микроконтроллер рассмотр нескольк пример работ оборудован пример реализац драйвер шин spi светодиодн лент несмотр llvm clang коробк поддержива различн целев платформ включ архитектур avr котор использ микроконтроллер arduino результат выполнен компиляц golang compiler весьм значител размер услов ограничен памят микроконтроллер станов блокир фактор решен проблем созда проект tinygo альтернативн компилятор поддержива мног функц стандартн библиотек созда оптимизирова размер код котор загруж микроконтроллер очен незначительн объем памят например наибол бюджетн arduino uno доступн меньш загрузк программ кром особен микроконтроллер архитектур avr явля отсутств операцион систем такж отличн принят модел прерыван многозадачн накладыва ограничен реализац библиотек котор должн уникальн кажд семейств микроконтроллер поддержк возможн язык go использован структур дан памят goroutines динамическ управлен памят сборк мусор благодар возможн оптимизац компилятор go результир размер образ идентичн программ средн получа меньш компиляц язык c например классическ мигалк c созда образ байт tinygo созда образ байт проект tinygo включа компилятор созда компиляц llvm использован значительн количеств оптимизац набор драйвер периферийн оборудован подключа шин микроконтроллер такж инструмент создан выполня образ загрузк микроконтроллер целев платформ микроконтроллер архитектур avr arduino семейств xtensa arm частичн такж компилятор создава выполня файл linux webassembly средн размер образ станов меньш компиляц целев платформ обычн компилятор go компилятор собра исходн текст установл windows linux macos такж запущ использован docker установк пакет сборк код микроконтроллер архитектур avr нужн дополнительн настро avrdude взаимодейств загрузчик установк станов доступн утилит командн строк tinygo котор использова след сценар tinygo build lt name lt platform path сборк двоичн образ указа платформ например arduino nintendoswitch тип образ определя платформ расширен файл например ll создан текстов bc создан биткод llvm hex создан файл формат intel hex прошивк микроконтроллер bin создан двоичн файл прошивк микроконтроллер wasm создан запуск браузер tinygo flash lt platform path сборк образ загрузк прошивк микроконтроллер tinygo gdb создан отлажива образ код возможн загрузк микроконтроллер запуск отладчик tinygo run загрузк запуск выполня код целев устройств tinygo clean удален промежуточн артефакт выполнен компиляц указа уровен оптимизац отсутств оптимизац минимальн оптимизац полезн необходим изучен ir хорош оптимизац s оптимизац размер код z агрессивн оптимизац кром поскольк сборк мусор интегрир скомпилирова код увеличива обь образ зада модел управлен памят автоматическ управлен памят отсутств leaking разреш выделен памят автоматическ освобожда conservative сборк мусор основ алгоритм такж зада реализац планировщик например avr отключ none параметр такж полезн получен информац размер образ доступ оборудован учет специфик архитектур конкретн плат использ пакет machine котор представля набор констант идентификац интерфейс gpio например цифров аналогов пин метод взаимодейств ним например configure настройк режим переключен состоян цифров пин такж зависим возможн микроконтроллер предоставля структур взаимодейств шин spi uart поддержива аппаратн реализац некотор драйвер программн эмуляц протокол шин необходим создан код точн контрол времен параметр например программн эмуляц протокол gpio реализац функц использова код ассемблер завис тип микроконтроллер рассмотр нескольк пример код go запуск микроконтроллер аналог hello world язык программирован явля котор использ интегрирова подключен светодиод циклическ переключа состоян включен реализац так приложен необходим подключ пакет timer выполнен задержк переключен состоян machine доступ gpio котор подключ светодиод package main import machine time запуск программ прежд выполн настройк gpio реж вывод буд использова констант led определен идентификатор gpio котор конкретн устройств подключ встроен светодиод led mode дал цикл буд переключа состоян светодиод разделя переключен времен задержк for полн код приложен выглядет package main import machine time func main led mode for запуст наш приложен подключен микроконтроллер например arduino uno tinygo flash arduino рассмотр сложн сценар использован дан акселерометр доступ подключен устройств необходим установ пакет драйвер соответств репозитор import поскольк устройств взаимодейств микроконтроллер шин инициализац драйвер необходим выполн настройк доступн arduino котор выполня конфигурац оборудован станов доступн координат получен завершен работ акселерометр должн вызва функц halt котор отключа устройств обновлен координат sensor x y z err подробн информац использован функц найд документац посмотр использован возможн ассемблерн вставок реализац точн настройк тайминг качеств пример посмотр возможн реализац протокол avr официальн драйвер поддержива вариант протокол котор использ множеств светодиодн панел лент особен протокол явля использован скважност кодирован значен бит приведен пример подстройк времен характеристик использ вставк пуст операц nop байт ассемблер правильн протокол func sp spot sendbyte pin value byte portset maskset portclear maskclear ldi bit counter st portset maskset set to lsl value brcs st portclear maskclear set to if zero bit nop nop nop protocol timing adjust nop nop nop st portclear maskclear end of pulse nop protocol timing adjust nop nop subi bit loop brne send next bit map string interface value value portset portset maskset maskset portclear portclear maskclear maskclear хочет обрат вниман использован регистр поскольк avr систем использован оперативн памят весьм огранич хранен значен локальн перемен оптимизац выш использ регистр процессор эт привест проблем применен регистр ассемблерн код например этап компиляц возника ошибк невозможн зарезервирова регистр хранен необходим локальн значен функц низкоуровнев доступ аппаратн возможн микроконтроллер доступн пакет lt arch например помощ volatile анонсирова явн хранен перемен регистр тип пакет получ доступ лин прерыван связа аппаратн компонент микроконтроллер например регистрац обработчик прерыван получен дан аппаратн контроллер spi использован handler обработчик получа структур аналогичн могут использова аппаратн возможн друг микроконтроллер например использован xtensa задействова адаптер использован драйвер пакет поскольк получен дан выполня асинхрон важн использова goroutines канал организац дан сет пример использован goroutines обработк дан посмотрет драйвер разработк код использова языков возможн go создава структур функц описан интерфейс устройств зависим доступн объем памят тип процессор использова механизм многозадачн goroutines channels динамическ выделен памят сборк мусор такж готов алгоритм реализова доступн пакет go например запуст микроконтроллер такж доступн мног стандартн пакет go особ вниман уделя динамическ выделен памят особен микроконтроллер небольш объем оперативн памят использован динамическ массив выделен памят make случа огранич тип byte котор явля эквивалент строк работ строк tinygo доступн пакет fmt strconv strings unicode text такж возможн использова пакет encoding работ различн форм кодирован дан кром xml crypto шифрован хэширован archive compress работ сжат дан image поддержк изображен math математическ действ net обм дан использован сетев протокол например друг практик использован математическ пакет хочет отмет добавлен поддержк чисел плава точк существен увеличен размер скомпилирова образ например генерац случайн чисел использова шум получа неподключен аналогов вход ин генератор случайн чисел предусмотр микроконтроллер tinygo недоступн поскольк микроконтроллер отсутств операцион систем механизм взаимодейств отлича принят posix пример использован tinygo посмотрет исходн код прошивк микроконтроллер прототип устройств aircube github дочита конц хоч приглас бесплатн занят мо коллег otus тем структур язык golang занят будут рассмотр так понят процесс определен структур инкапсуляц пол структур определен метод структур побеседу вложен анонимн структур такж постара успет поговор структурн тэг использован контекст json xml субд занят сможет создава пользовательск тип дан комбинирова соб зарегистрирова вебинар тег tinygo golang arduino микроконтроллер otus хаб блог компан otus go программирован микроконтроллер интернет вещ голос добав закладк комментар otus цифров навык ведущ эксперт сайт вконтакт telegram карм рейтинг dmitrii zolotov dmitriizolotov flutter developer yandexpro devops it architect задонат комментар комментар публикац лучш сутк похож информац сайт дат регистрац март дат основан апрел числен человек местоположен росс представител otus ваш аккаунт войт регистрац раздел публикац новост хаб компан автор песочниц информац устройств сайт автор компан документ соглашен конфиденциальн услуг корпоративн блог медийн реклам нативн проект образовательн программ стартап мегапроект facebook twitter vk telegram youtube яндекс дзен настройк язык техническ поддержк вернут стар верс habr