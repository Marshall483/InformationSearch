версионирован api един кодов баз верс хабр хабр β откр список стат автор поток разработк администрирован дизайн менеджмент маркетинг научпоп поиск профил обнов рейтинг superjob платформ поиск сотрудник работодател samdark сен версионирован api един кодов баз верс врем прочтен мин количеств просмотр блог компан superjob блог компан конференц олег бунин онтик php программирован систем управлен верс год существован superjob разработа верс реализац api интеграц бэкенд врем разработк последн реш пересмотрет подход версионирован актуальн реализац порядк эндпойнт модел сущност поддержива мажорн верс проект развива вмест меня требован api знач неизбежн нарушен обратн совместим опыт решен проблем подел антон золотилин superjob увид сам распространен решен проблем версионирован подход котор реализова superjob качеств бонус узна эт решен помога значительн сократ рост затрат тестирован верс помощ одн пример нарушен обратн совместим процесс развит продукт изменен требован реализац рол пользовател этап mvp определен рол пользовател достаточн флаг зарегистрирова пользовател гост зат приложен треб конкретн рол котор переда например строков литерал дальн бизнес понадоб цел коллекц рол api использ строг внутр одн команд разработк изменен код клиент сервер выпуска релиз одновремен проблем начина api использ внешн команд разработк совпада релизн цикл продукт соблюден обратн совместим придет одновремен поддержива стар нов верс дан требован результат получ маленьк монстрик нескольк итерац преврат больш монстр конечн пользовател монстр естествен увид разработчик котор польз ваш api вряд обрад изучен так простын помет устаревш стар пол эндпоинт атрибут связ времен избав активн развит api документац равн накоп чересчур устаревш информац версионирован помога избежа подобн пробл прост фиксир номер верс определен контракт пользовател зависим запрошен верс api работа эт контракт небольш изменен влия пользовательск оп фиксир повышен минорн верс появлен изменен наруша bc backward compatibility заключа нов контракт инкремент мажорн верс клиент api гот перейт получ свободн историческ наслоен api пок приложен котор польз верс api будет поддержива мер перевод клиентск приложен нов верс стар удаля разработчик superjob иска вариант реализац версионирован api снача пыта найт материал тем интернет запрос врод версионирован api нескольк страниц поиск выдава передава верс хэдер url поэт нача собира информац митап коллег организац выдел основн подход версионирован случа api конкретн верс пробл обратн совместим подход реша приложен клиент api работа набор фич сервер естествен поддержива полн реестр фич приложен коннект проверя набор активн фич реестр поддержива приложен основан совпаден сервер знает как формат дава ответ приложен слома так подход минус высок порог вхожден публичн api фич реестр сложн сторон разработчик поня фич отвеча сочета соб времен реестр растет поддержива приложен фич могут вступ конфликт отвеча одн ту част поэт взгляд разработчик superjob подход тех случа api использ ваш внутрен команд прощ дел экспертиз больш област знан контролирова использован функциона фич версионирован средств vcs втор подход эт версионирован помощ сист контрол верс обычн польз разработчик библиотек прост навешива тэг верс нужн комм случа работа отда коп сво код запуст клиент пробл код запуска имен знач кажд поддержива верс придет поднима минимум отдельн инстанс эт главн минус отдельн экземпляр сервер кажд поддержива верс api помим придет поддержива монитор тестирова нескольк продакш веток бо времен ветк верс расход сильн расхожден код сложн доставля фикс небольш разниц код обойт патч cherry pick времен придет поддержива кажд верс вручн версионирован средств vcs метод версионирован подход маленьк api котор прост легк поддержива внутрен api микросервис люб случа использ инстанс версионирован средств язык php сам распространен подход антон золотилин назва версионирован страдан вход различн практик например верс могут разделя namespace нужн подключа зависим запрошен верс класс нов верс могут наследова класс предыдущ верс функциона переопределя так мешанин подход средств язык свал все куч демонстрац подход выглядет версионирован страдан lt php namespace use class extends public function process if version dosomething else parent подход очевидн минус несмотр использован ооп наследован код равн приход дублирова сложн логик практическ люб изменен снача нужн вычисл измен клиент api внест изменен задокументирова вручн предыдущ подход возника сложност доставк фикс десятк верс лежа разн папк найт отлич проблематичн поэт подход использова прототипирован выпуск mvp команд разработк superjob трех вариант подошел сво подход реализац версионирован нашл буквальн собствен код версионирован blueprints последн api superjob использ декларативн строг специфицирова стандарт json api реализац пришл вынест информац сущност конфиг поскольк все леж файл конфигурац конфиг лежат папк поч полож все относ специфик конкретн верс api отдельн папк счита е верс написа един верс движок котор инициализирова набор конфиг лет собира нужн верс изолиру код бэкенд информац запрошен верс принят связа верс решен способ нов поэт специальн презентац антон золотилин придума назван котор ассоциир сборк конфигурац чертеж blueprints выгляд эт версионирован blueprints предполож бэкенд монол набор сервис фасад важн необходим выдел подсист котор отвеча api отдел зат науч е инстанцирова конкретн конфиг запрошен верс привод пример код конфиг котор использ superjob особ смысл кажд сво реализац api сво фреймворк сво решен api реализ restful rpc поэт дава рассмотр основн принцип api аналог обычн интерфейс парадигм ооп набор эндпоинт эт метод интерфейс входн выходн дан эндпойнт эт сигнатур метод эндпоинт помим скаляр могут использова структур дан эт пользовательск класс декларац api котор вынест конфигурацион файл эт описан эндпоинт метод сигнатур структур дан сущност используем api пользовательск класс представ вид стандартн интерфейс простеньк api метод получен коллекц пользовател услов фильтрац например регистрац нов пользовател добавлен рол связ друг пользовател версионирован blueprints lt php interface api public function getusers condition condition user public function createuser user user user public function addfriendship user user user friend public function adduserrole user user role role продемонстриру как подсистем необходим выдел сло отвеча api кажд отвеча типов реализац api перевод версионирован blueprints нескольк лет назад популярн вирусн реклам внутрен банкомат проч аппарат котор показыва грязн нутр типичн реализац api все эт похож большинств реализац api клиент api выгляд чин благородн реализац бэкенд новичк пуска пуга увольня интерфейс api обычн наход контроллер котор обраща внутрен сервис приложен формир ваш задач реализац версионирован blueprints перв очеред раздел интерфейс api котор заключа контракт клиентск приложен нек фасад точн набор интерфейс котор сервис api обраща бэкенд вынесен подсист api сло соглас пар интерфейс реализова систем сист конфигурац дан котор умеет брат сериализова dto превраща модел отдава бэкенд ответ бэкенд формирова понятн клиент api дан cист конфигурац эндпоинт котор занима маршрутизац ограничен доступ описан входн выходн дан такж описан фильтр сортировк коллекц сист управлен верс котор собира две предыдущ подсистем основ конфиг получен папк запрошен верс рассмотр нюанс реализац api описыва конфиг разработчик superjob использ конфигурацион файл api формат yaml может использова люб котор нрав пример ниж конфиг эндпоинт restful реализац api секц endpoints содерж эндпоинт api уровн подсекц содержат uri ресурс метод http котор реализова дан ресурс случа реализац основ rpc вмест url достаточн указа назван метод api например getusers дал идет описан работ эндпоинт связ код бэкенд секц class служ указан обработчик может завест вмест две секц controller action обработк запрос свойствен некотор фреймворк секц query содерж информац запрос котор ожида эндпоинт дан пример описан поддержива фильтр сортировок секц out дан пример описыва возвраща эндпоинт сущност коллекц пользовател секц constraints пригод запрос изменен описа ограничен доступ функционал эндпоинт валидатор входн дан доступ описа подсекц validation указа класс входн параметр пример константн параметр назван проверк указан payload брат втор параметр userid конфигурац эндпоинт rest endpoints get class query filters town town required sort nickname birthdate out user patch class constraints validation class parameters rule editprofile userid body вариант код запрос коллекц пользовател конфигурац запрос коллекц пользовател lt php файл обрабатыва запрос get запрос method getusers api namespace class getuseraction extends apigetaction public function action filters filters sort sort user users find filter sort return format users пример код конвертац dto модел обратн lt php somewhere userdto getbody user userhydrator userdto var userrepository repository var user user user save user userdto userhydrator user return userdto пример конфигурац сущност user множествен связ town файл entities user model repository attributes nickname type string required getter getlogin relationships towns type town getter gettowns setter gettowns superjob такж разработа сист событ котор инициир разн этап сохранен входя сущност событ обрабатыва обработчик котор указыва конфиг эт сущност использ набор прав видим фильтрац доступ пользовател скрыт част экземпляр коллекц определен групп пользовател редк случа возникнут необходим дополнительн использован feature прикрепля верс дальн активн провер код бэкенд корен образ измен поведен верс разработчик superjob внедр feature например перв двух верс запрет использова put котор поддержива стандарт json api обойт реализац набор некотор инструмент библиотек котор сэконом врем реализац так способ версионирован преврат конфигурац набор абстракц ваш метаязык описан api потреб парсер историческ слож разработк superjob использова peg парсер хот друг реализац парсер например ast parser возможн подойдет собира раз слепок api нужн верс удобн воспользова автогенерац закэширова готов абстракц например помощ превращен dto нужн модел обратн подход люб например jmsserializer сво недостатк больш количеств ответ работа медлен довольн тяжел план поддержк поэт superjob переста пользова написа сво сериалайзер hydrator котор быстр конверт сущност нача вполн подойдет jmsserializer документац интернет име конфиг может перв изменен файл обновля документац формат openapi swagger ом строг регламентирова спецификац api смысл пыта версионирова помощ конфиг выбер строг специфицирова стандарт api разработа спецификац например api graphql счастливчик наполовин готов конфиг graphql эт файл оста науч маршрутизац подтягива нужн конфиг запрошен верс преимуществ версионирован blueprints вынесл api предел бэкенд изолирова код пил сервис модифицирова монол боя слома api движок api леж отдельн лет собира версионирова конфиг документац созда автоматическ спецификац сам api например истор изменен changelogs выпуск нов верс эт прост копирован папк разрабатыва верс папк назван нов верс сраз станов доступн поэт выпуск нов верс вынест автоматик разработчик придет отвлека сво задач недостатк версионирован blueprints начальн этап разработк треб значительн трудозатрат особен ваш api имеет строг спецификац снача придет разработа вынест эт конфиг зат дальш намн легч разработчик superjob полгод смотрел движок api нем меня прост выпуска нов продуктов эндпойнт небольш минус спецификац ide поддержк разработчик superjob изобрел сво метаязык конфигурац поддержк пришл реализовыва сам дела плагин phpstorm очен интересн дел результат работа поиск использован автозам класс конфиг меня указыва подсвечива например как верс класс использ пок автоподстановк планир разработк ближайш будущ конфиг меня указыва подсвечива например как верс указа класс использ пок автоподстановк планир разработк ближайш будущ тестирован верс тестир верс api superjob функциональн тестирован верс api использ тестов фреймворк behat команд superjob немн расшир функциона помеча тестов сценар тэг верс котор примен соответствен тестов сборк кажд сценар запуска кажд верс котор активн попада указа сценар диапазон верс рост количеств верс сценар тестирован пропорциональн растет врем необходим прогон тест способ версионирован blueprints подсказа разработчик сократ эт врем благодар снача проиллюстриру пробл тестирован верс предполож пят сценар перв верс кажд нов верс проверя пят сценар убед выпуск нов верс слома добавлен нов сценар кажд верс происход прирост времен выглядел график тестов прогон команд superjob нача использова график тестов прогон использован кажд ступен график выпуск нов верс эт плюс тысяч тест перв верс затрачен тест врем наход диапазон минут верс эт полчас бесконечн став кост горизонтальн масштабирова раскидыва котор запуст разн процесс параллельн равн получ верс поддержива функциона докидыва дольш проход стад тестирован следовательн релиз этап разработк api оптимизац тест разработчик обнаруж код жемчужин сценар котор гоня нескольк верс провер пада сценар неизмен одинаков исходн услов услов проверк верс код котор завис верс вынесл отдельн сам api меня верс верс бэкенд ваш верс отлича леж конфиг поэт перв прогон верс может считыва передава сист дайджест используем дан сценар конфиг сущност эндпоинт след верс использ сам набор дайджест повторн прогон результат так знач провод тест необязательн сравнен эталон верс появля хот небольш расхожден верс запуска тест принима нов эталон верс допуст втор сценар разработчик долг трога работа одн набор конфиг четверт сценар меня протяжен двух верс пят протяжен трех благодар выкинут лишн прогон верс искусствен пример получ раз меньш прогон завис наскольк различа ваш верс позволя тестирова реальн изменен верс несмотр api superjob продолжа добавля верс количеств тестов сценар перевал две половин тысяч внедрен продолжительн сценар стабилизирова минут график тестов прогон заключен разработчик superjob нашл собствен реализац решен проблем котор вынесен спецификац api конфигурацион файл показа отличн результат дальн модернизац подход работ верс врем проведен тестирован нача использова смогл прекрат времен рост тест верс находк могут примен друг систем superjob планир нов доработк виде выступлен антон золотилин конференц php russia открыт трансляц главн зал saint возможн благодар поддержк цфт доступ трансляц нужн зарегистрирова дня эт будут доклад смотр расписан тег php версионирован версионирован баз дан программирован api impact analysis совместим верс blueprints versioning version control systems хаб блог компан superjob блог компан конференц олег бунин онтик php программирован систем управлен верс голос добав закладк комментар superjob платформ поиск сотрудник работодател сайт facebook карм рейтинг александр макар samdark php yii задонат сайт сайт сайт комментар комментар публикац лучш сутк похож информац сайт дат регистрац ноябр дат основан числен человек местоположен росс ваш аккаунт войт регистрац раздел публикац новост хаб компан автор песочниц информац устройств сайт автор компан документ соглашен конфиденциальн услуг корпоративн блог медийн реклам нативн проект образовательн программ стартап мегапроект facebook twitter vk telegram youtube яндекс дзен настройк язык техническ поддержк вернут стар верс habr